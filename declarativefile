pipeline {
    agent { label GIT }
    stages {
      stage('clone code') {
        steps {
          git url: 'https://github.com/99876543/spring-petclinic.git',
             branch: 'declarative'
        }
      }
      stage('build') {
        tools {
            jdk 'JDK_17'
        }
        steps { 
           sh './mvnw package'
        }       
      }
      stage('post build') {
        steps {
            archiveArtifacts artifacts: '**/target/spring-petclinic.jar',
                             onlyIfSuccessful: true
            junit testResults: '**/surefire-reports/TEST-*.xml'
        }
      }
    }
}